webpackJsonp([2],{"/rEA":function(t,e,a){"use strict";(function(t){function n(t,e,a){this.name="ApiError",this.message=t||"Default Message",this.errorType=e||S.Default,this.innerError=a,this.stack=(new Error).stack}var o=a("rVsN"),r=a.n(o),i=a("3cXf"),s=a.n(i),u=a("IYkF"),l=a.n(u),f=a("2sCs"),c=a.n(f),d=a("DEjr"),p=a.n(d),g=a("bzuE"),S={Default:"default",Sysetem:"sysetem"};n.prototype=l()(Error.prototype),n.prototype.constructor=n;var v=c.a.create({baseURL:g.a,timeout:2e4,responseType:"json",withCredentials:!0});v.interceptors.request.use(function(t){return"post"===t.method||"put"===t.method||"patch"===t.method?(t.headers={"Content-Type":"application/json charset=utf-8"},t.data=s()(t.data)):"delete"!==t.method&&"get"!==t.method&&"head"!==t.method||(t.paramsSerializer=function(t){return p.a.stringify(t,{arrayFormat:"indices"})}),t},function(t){return t}),v.interceptors.response.use(function(e){if(-1===e.headers["content-type"].indexOf("json"))return e;var a=void 0;if("arraybuffer"===e.request.responseType&&"[object ArrayBuffer]"===e.data.toString()){var o=t.from(e.data).toString("utf8");console.log(o),a=JSON.parse(o)}else a=e.data;if(a&&a.url)top.location=a.url;else if(a&&200!==a.code)return console.log(a),r.a.reject(new n(a.message));return e},function(t){return r.a.reject(new n(t.message,S.Sysetem,t))}),e.a={install:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.httpClient=v,t.prototype.$httpClient=v}}}).call(e,a("7xR8").Buffer)},DkkG:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-header",{staticClass:"header",staticStyle:{background:"#EDF2FC"}},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticStyle:{"line-height":"40px"}},[t._v("请假列表")])],1)],1),t._v(" "),a("el-main",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.searchCriteriaForm}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"姓名"},model:{value:t.searchCriteriaForm.keyword,callback:function(e){t.$set(t.searchCriteriaForm,"keyword",e)},expression:"searchCriteriaForm.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getUsersed}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getUsersAll}},[t._v("全部")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.users,"highlight-current-row":"",border:"","cell-class-name":"table_style","header-row-class-name":"header_style"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{height:"200px"},on:{click:function(a){t.getProps(e.row)}}},[a("el-steps",{attrs:{direction:"vertical",active:e.row.AuditStaffLevelCurrents}},[a("el-step",{attrs:{title:"步骤 1"}},[a("template",{slot:"description"},[a("span",[t._v(t._s("审核状态:  "+e.row.renderStatus1.title+"   审核人:  "+e.row.AuditStaff1.Name))]),t._v(" "),a("span",[t._v("审核时间: "),a("span",[t._v(t._s(e.row.AuditDate1))])]),t._v(" "),e.row.renderStatus1.isShowButton?a("button",{on:{click:function(a){t.getStationLeave(e.row)}}},[t._v("审批")]):t._e()])],2),t._v(" "),e.row.AuditStaffLevelMax>1?a("el-step",{attrs:{title:"步骤 2"}},[a("template",{slot:"description"},[a("span",[t._v(t._s("审核状态:  "+e.row.renderStatus2.title+"   审核人:  "+e.row.AuditStaff2.Name))]),t._v(" "),a("span",[t._v("审核时间: "),a("span",[t._v(t._s(e.row.AuditDate2))])]),t._v(" "),e.row.renderStatus2.isShowButton?a("button",{on:{click:function(a){t.getStationLeave(e.row)}}},[t._v("审批")]):t._e()])],2):t._e(),t._v(" "),e.row.AuditStaffLevelMax>2?a("el-step",{attrs:{title:"步骤 3"}},[a("template",{slot:"description"},[a("span",[t._v(t._s("审核状态:  "+e.row.renderStatus3.title+"   审核人:  "+e.row.AuditStaff3.Name))]),t._v(" "),a("span",[t._v("审核时间: "),a("span",[t._v(t._s(e.row.AuditDate3))])]),t._v(" "),e.row.renderStatus3.isShowButton?a("button",{on:{click:function(a){t.getStationLeave(e.row)}}},[t._v("审批")]):t._e()])],2):t._e(),t._v(" "),e.row.AuditStaffLevelMax>3?a("el-step",{attrs:{title:"步骤 4"}},[a("template",{slot:"description"},[a("span",[t._v(t._s("审核状态:  "+e.row.renderStatus4.title+"   审核人:  "+e.row.AuditStaff4.Name))]),t._v(" "),a("span",[t._v("审核时间: "),a("span",[t._v(t._s(e.row.AuditDate4))])]),t._v(" "),e.row.renderStatus4.isShowButton?a("button",{on:{click:function(a){t.getStationLeave(e.row)}}},[t._v("审批")]):t._e()])],2):t._e()],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"TargetStaff.Name",label:"姓名",span:2}}),t._v(" "),a("el-table-column",{attrs:{prop:"StaffLeaveType.Name",label:"请假原因",span:2}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",span:3},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.BeginDate)+"  "+t._s(e.row.BeginDatePartial)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结束时间",span:3},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.EndDate)+"  "+t._s(e.row.EndDatePartial)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"days",label:"请假天数",span:2}}),t._v(" "),a("el-table-column",{attrs:{prop:"RequestStaff.Name",label:"申请人",span:3}}),t._v(" "),a("el-table-column",{attrs:{prop:"RequestAttachmentURL1",label:"申请附件1",span:3}}),t._v(" "),a("el-table-column",{attrs:{prop:"RequestAttachmentURL2",label:"申请附件2",span:3}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isStationLeave?a("el-button",{attrs:{size:"small"},on:{click:function(a){t.getStationLeave(e.row)}}},[t._v("审批")]):t._e()]}}])})],1),t._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[t.page.totalItemCount?a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.pagingInfoForm.pageNumber,"page-sizes":[10,50,100,200,400],"page-size":t.pagingInfoForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalItemCount},on:{"size-change":t.handlePaginationSizeChange,"current-change":t.handlePaginationCurrentChange}}):t._e()],1),t._v(" "),a("el-dialog",{staticClass:"entry_style",attrs:{title:t.userEntry,visible:t.isAuditStationLeave,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isAuditStationLeave=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}],ref:"AuditStationLeaveForm",staticClass:"small-space",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:t.AuditStationLeaveForm,"label-position":"right","label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"原因"}},[a("el-input",{staticClass:"input_style",model:{value:t.AuditStationLeaveForm.AuditRemark,callback:function(e){t.$set(t.AuditStationLeaveForm,"AuditRemark",e)},expression:"AuditStationLeaveForm.AuditRemark"}})],1)],1),t._v(" "),a("div",{staticClass:"submit"},[a("div",{staticClass:"buttonStyle"},[a("el-button",{attrs:{size:"small"},on:{click:t.getAuditing}},[t._v("同意")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.getUnAuditing}},[t._v("拒绝")])],1)])],1)],1)],1)},o=[],r={render:n,staticRenderFns:o};e.a=r},OuqK:function(t,e,a){"use strict";function n(t){a("tCAp")}var o=a("heMH"),r=a("DkkG"),i=a("/Xao"),s=n,u=i(o.a,r.a,!1,s,null,null);e.a=u.exports},Uo1D:function(t,e){},VsUZ:function(t,e,a){"use strict";var n=a("E7jK");e.a={login:function(t){return n.default.httpClient.post("/admin/login",t)},getStaffInfoList:function(t){return n.default.httpClient.post("/Staff/GetStaffInfoList",t)},GetStaffBaseList:function(t){return n.default.httpClient.post("/Project/Staff/GetStaffBaseList",t)},GetGroupInfoBaseList:function(){return n.default.httpClient.post("/Project/Staff/HRGetGroupInfoBaseList")},GetStaffInfoList:function(t){return n.default.httpClient.post("/Project/Staff/Add",t)},GetEducationInfoBaseList:function(){return n.default.httpClient.post("/Project/Staff/GetEducationInfoBaseList")},SetEdit:function(t){return n.default.httpClient.post("/Project/Staff/Edit",t)},GetStaffInfo:function(t){return n.default.httpClient.post("/Project/Staff/GetStaffInfo")},GetDictionaryList:function(){return n.default.httpClient.post("/Project/Staff/GetDictionaryList")},getStaffInfoBaseList:function(t){return n.default.httpClient.post("/Project/Staff/GetStaffInfoBaseList",t)},getEntry:function(t){return n.default.httpClient.post("/Project/Staff/Entry",t)},resetEditBank:function(t){return n.default.httpClient.post("/Project/Staff/EditBank",t)},resetEditRecruitChannel:function(t){return n.default.httpClient.post("/Project/Staff/EditRecruitChannel",t)},resetEditInsurance:function(t){return n.default.httpClient.post("/Project/Staff/EditInsurance",t)},resetEditRiderReferrer:function(t){return n.default.httpClient.post("/Project/Staff/EditRiderReferrer",t)},getExitReasonInfoBaseList:function(){return n.default.httpClient.post("/Project/Staff/GetExitReasonInfoBaseList")},getExitUserReason:function(t){return n.default.httpClient.post("/Project/Staff/Exit",t)},getInBlackList:function(t){return n.default.httpClient.post("/Project/Staff/InBlackList",t)},getEditRiderEleID:function(t){return n.default.httpClient.post("/Project/Staff/EditRiderEleID",t)},getchangeRiderJobType:function(t){return n.default.httpClient.post("/Project/Staff/ChangeRiderJobType",t)},getStaffTurnover:function(){return n.default.httpClient.post("/Project/Staff/GetStaffTurnoverTypeInfoBaseList")},getTurnoverList:function(t){return n.default.httpClient.post("/Project/Staff/Turnover",t)},getRequestStationLeave:function(t){return n.default.httpClient.post("/Project/Flow/RequestStationLeave",t)},getStaffLeaveTypeInfoBaseList:function(t){return n.default.httpClient.post("/Project/Staff/GetStaffLeaveTypeInfoBaseList",t)},getStationLeaveList:function(t){return n.default.httpClient.post("/Project/Flow/GetStationLeaveList",t)},getAuditStationLeave:function(t){return n.default.httpClient.post("/Project/Flow/AuditStationLeave",t)},getGroupTree:function(){return n.default.httpClient.get("/Project/Group/GetGroupTree")},addGroup:function(t){return n.default.httpClient.post("/Project/Group/AddGroup",t)},editGroup:function(t){return n.default.httpClient.post("/Project/Group/EditGroup",t)},removeGroup:function(t){return n.default.httpClient.post("/Project/Group/RemoveGroup",t)},moveGroup:function(t){return n.default.httpClient.post("/Project/Group/MoveGroup",t)},getRoleBases:function(){return n.default.httpClient.get("/admin/getRoleBases")},getConfigStaffLeaveAuditFlow:function(t){return n.default.httpClient.post("/Project/Group/ConfigStaffLeaveAuditFlow",t)},importAttendance:function(t){return n.default.httpClient.post("/Project/Report/ImportAttendance",t,{responseType:"arraybuffer",timeout:6e4})},getCitys:function(){return n.default.httpClient.post("/Project/Group/GetCitys")},getRole:function(){return n.default.httpClient.post("/Project/Group/GetRoles")},getStaffStatus:function(){return n.default.httpClient.post("Project/Staff/GetStaffStatus")},calculate:function(t){return n.default.httpClient.post("/Project/Report/Calculate",t,{responseType:"arraybuffer",timeout:6e4})}}},bzuE:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n="/manager/api"},heMH:function(t,e,a){"use strict";var n=a("3cXf"),o=a.n(n),r=a("VsUZ"),i=a("dLdd"),s=a.n(i);e.a={data:function(){return{users:[],filters:{Keyword:""},listLoading:!1,isAuditStationLeave:!1,AuditStationLeaveForm:{StaffLeaveID:"",AuditStatus:"",AuditRemark:""},isloading:!1,userEntry:"",pagingInfoForm:{pageNumber:1,pageSize:10,isExcludeMetaData:!1,sortInfo:{sort:"StaffLeaveID",sortDir:"DESC"}},searchCriteriaForm:{keyword:null,groupIDs:[],roleIDs:[],StaffStatusIDs:[],groupIDPath:[]},page:{list:null,totalItemCount:null,totalPageCount:null}}},mounted:function(){this.getStationLeaveList()},methods:{getRenderrStatus:function(t,e,a){var n=2*t;return e<n-1?{title:"未审",isShowButton:t===a&&e===2*(t-1)-1}:e===n?{title:"拒绝",isShowButton:!1}:{title:"通过",isShowButton:!1}},getProps:function(t){console.log("数据"+o()(t))},handlePaginationSizeChange:function(t){this.pagingInfoForm.pageSize=t,this.pagingInfoForm.pageNumber=1,this.getStationLeaveList()},handlePaginationCurrentChange:function(t){this.pagingInfoForm.pageNumber=t,this.getStationLeaveList()},getStationLeaveList:function(){var t=this,e=s.a.extend({},this.pagingInfoForm,this.searchCriteriaForm);r.a.getStationLeaveList(e).then(function(e){t.page=e.data.page;var a=e.data.page.list;console.log("分页数据",o()(e));for(var n=0;n<a.length;n++){a[n].BeginDate=a[n].BeginDate.substr(0,11),a[n].EndDate=a[n].EndDate.substr(0,11),a[n].days=parseInt(a[n].HalfDays)/2,1===a[n].BeginDatePartial?a[n].BeginDatePartial="上午":a[n].BeginDatePartial="下午",1===a[n].EndDatePartial?a[n].EndDatePartial="上午":a[n].EndDatePartial="下午",a[n].AuditStaffLevelCurrents=a[n].AuditStaffLevelCurrent+1;for(var r=1;r<=a[n].AuditStaffLevelMax;r++)a[n]["renderStatus"+r]=t.getRenderrStatus(r,a[n].AuditStatus.AuditStatusID,a[n].CurrentUserAudituditStaffLevel),r===a[n].CurrentUserAudituditStaffLevel&&(a[n].isStationLeave=a[n]["renderStatus"+r].isShowButton),console.log(r,a[n].AuditStaffLevelMax,a[n].AuditStatus.AuditStatusID,a[n]["renderStatus"+r])}t.users=a,console.log("请假列表"+o()(e.data.list))},function(e){t.$message({message:e.message,type:"error"})})},getStationLeave:function(t){this.isAuditStationLeave=!0,this.userEntry=t.TargetStaff.Name+" 请假审批",this.AuditStationLeaveForm.StaffLeaveID=t.StaffLeaveID,console.log("审核"+o()(t))},getAuditing:function(){var t=this;this.AuditStationLeaveForm.AuditStatus=1,this.isloading=!0;var e=[];e.push(this.AuditStationLeaveForm),r.a.getAuditStationLeave(e).then(function(e){t.isloading=!1,t.isAuditStationLeave=!1,t.getStationLeaveList(),console.log("传输成功",o()(e))},function(e){t.$message({message:e.message,type:"error"}),t.isloading=!1}),console.log("同意传输数据",this.AuditStationLeaveForm)},getUnAuditing:function(){var t=this;this.AuditStationLeaveForm.AuditStatus=2,this.isloading=!0;var e=[this.AuditStationLeaveForm];r.a.getAuditStationLeave(e).then(function(e){t.isloading=!1,t.isAuditStationLeave=!1,t.getStationLeaveList(),console.log("拒绝成功",o()(e))},function(e){t.$message({message:e.message,type:"error"}),t.isloading=!1}),console.log("拒绝传输数据",this.AuditStationLeaveForm)},getUsersed:function(){console.log("查询",this.searchCriteriaForm),this.getStationLeaveList()},getUsersAll:function(){this.resetsearchForm(),this.getStationLeaveList()},resetsearchForm:function(){this.searchCriteriaForm={keyword:null,groupID:null,roleID:null,groupIDPath:[]}}}}},nMKz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Uo1D"),o=(a.n(n),a("Ni1V")),r=a.n(o),i=a("E7jK"),s=a("uN2V"),u=(a.n(s),a("OuqK")),l=a("/rEA");i.default.config.productionTip=!1,i.default.use(r.a),i.default.use(l.a),new i.default({el:"#app",render:function(t){return t(u.a)}})},tCAp:function(t,e){},uN2V:function(t,e){}},["nMKz"]);
//# sourceMappingURL=stationleave.js.map