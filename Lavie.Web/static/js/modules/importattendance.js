webpackJsonp([4],{"/rEA":function(t,e,n){"use strict";(function(t){function r(t,e,n){this.name="ApiError",this.message=t||"Default Message",this.errorType=e||h.Default,this.innerError=n,this.stack=(new Error).stack}var o=n("rVsN"),a=n.n(o),i=n("3cXf"),s=n.n(i),u=n("IYkF"),l=n.n(u),f=n("2sCs"),c=n.n(f),p=n("DEjr"),d=n.n(p),m=n("bzuE"),h={Default:"default",Sysetem:"sysetem"};r.prototype=l()(Error.prototype),r.prototype.constructor=r;var C=c.a.create({baseURL:m.a,timeout:2e4,responseType:"json",withCredentials:!0});C.interceptors.request.use(function(t){return"post"===t.method||"put"===t.method||"patch"===t.method?(t.headers={"Content-Type":"application/json charset=utf-8"},t.data=s()(t.data)):"delete"!==t.method&&"get"!==t.method&&"head"!==t.method||(t.paramsSerializer=function(t){return d.a.stringify(t,{arrayFormat:"indices"})}),t},function(t){return t}),C.interceptors.response.use(function(e){if(-1===e.headers["content-type"].indexOf("json"))return e;var n=void 0;if("arraybuffer"===e.request.responseType&&"[object ArrayBuffer]"===e.data.toString()){var o=t.from(e.data).toString("utf8");console.log(o),n=JSON.parse(o)}else n=e.data;if(n&&n.url)top.location=n.url;else if(n&&200!==n.code)return console.log(n),a.a.reject(new r(n.message));return e},function(t){return a.a.reject(new r(t.message,h.Sysetem,t))}),e.a={install:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.httpClient=C,t.prototype.$httpClient=C}}}).call(e,n("7xR8").Buffer)},AMoT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Uo1D"),o=(n.n(r),n("Ni1V")),a=n.n(o),i=n("E7jK"),s=n("uN2V"),u=(n.n(s),n("DTlA")),l=n("/rEA");i.default.config.productionTip=!1,i.default.use(a.a),i.default.use(l.a),new i.default({el:"#app",render:function(t){return t(u.a)}})},DTlA:function(t,e,n){"use strict";function r(t){n("MErq")}var o=n("W8l3"),a=n("Zkk7"),i=n("/Xao"),s=r,u=i(o.a,a.a,!1,s,null,null);e.a=u.exports},MErq:function(t,e){},Uo1D:function(t,e){},VsUZ:function(t,e,n){"use strict";var r=n("E7jK");e.a={login:function(t){return r.default.httpClient.post("/admin/login",t)},getStaffInfoList:function(t){return r.default.httpClient.post("/Staff/GetStaffInfoList",t)},GetStaffBaseList:function(t){return r.default.httpClient.post("/Project/Staff/GetStaffBaseList",t)},GetGroupInfoBaseList:function(){return r.default.httpClient.post("/Project/Staff/HRGetGroupInfoBaseList")},GetStaffInfoList:function(t){return r.default.httpClient.post("/Project/Staff/Add",t)},GetEducationInfoBaseList:function(){return r.default.httpClient.post("/Project/Staff/GetEducationInfoBaseList")},SetEdit:function(t){return r.default.httpClient.post("/Project/Staff/Edit",t)},GetStaffInfo:function(t){return r.default.httpClient.post("/Project/Staff/GetStaffInfo")},GetDictionaryList:function(){return r.default.httpClient.post("/Project/Staff/GetDictionaryList")},getStaffInfoBaseList:function(t){return r.default.httpClient.post("/Project/Staff/GetStaffInfoBaseList",t)},getEntry:function(t){return r.default.httpClient.post("/Project/Staff/Entry",t)},resetEditBank:function(t){return r.default.httpClient.post("/Project/Staff/EditBank",t)},resetEditRecruitChannel:function(t){return r.default.httpClient.post("/Project/Staff/EditRecruitChannel",t)},resetEditInsurance:function(t){return r.default.httpClient.post("/Project/Staff/EditInsurance",t)},resetEditRiderReferrer:function(t){return r.default.httpClient.post("/Project/Staff/EditRiderReferrer",t)},getExitReasonInfoBaseList:function(){return r.default.httpClient.post("/Project/Staff/GetExitReasonInfoBaseList")},getExitUserReason:function(t){return r.default.httpClient.post("/Project/Staff/Exit",t)},getInBlackList:function(t){return r.default.httpClient.post("/Project/Staff/InBlackList",t)},getEditRiderEleID:function(t){return r.default.httpClient.post("/Project/Staff/EditRiderEleID",t)},getchangeRiderJobType:function(t){return r.default.httpClient.post("/Project/Staff/ChangeRiderJobType",t)},getStaffTurnover:function(){return r.default.httpClient.post("/Project/Staff/GetStaffTurnoverTypeInfoBaseList")},getTurnoverList:function(t){return r.default.httpClient.post("/Project/Staff/Turnover",t)},getRequestStationLeave:function(t){return r.default.httpClient.post("/Project/Flow/RequestStationLeave",t)},getStaffLeaveTypeInfoBaseList:function(t){return r.default.httpClient.post("/Project/Staff/GetStaffLeaveTypeInfoBaseList",t)},getStationLeaveList:function(t){return r.default.httpClient.post("/Project/Flow/GetStationLeaveList",t)},getAuditStationLeave:function(t){return r.default.httpClient.post("/Project/Flow/AuditStationLeave",t)},getGroupTree:function(){return r.default.httpClient.get("/Project/Group/GetGroupTree")},addGroup:function(t){return r.default.httpClient.post("/Project/Group/AddGroup",t)},editGroup:function(t){return r.default.httpClient.post("/Project/Group/EditGroup",t)},removeGroup:function(t){return r.default.httpClient.post("/Project/Group/RemoveGroup",t)},moveGroup:function(t){return r.default.httpClient.post("/Project/Group/MoveGroup",t)},getRoleBases:function(){return r.default.httpClient.get("/admin/getRoleBases")},getConfigStaffLeaveAuditFlow:function(t){return r.default.httpClient.post("/Project/Group/ConfigStaffLeaveAuditFlow",t)},importAttendance:function(t){return r.default.httpClient.post("/Project/Report/ImportAttendance",t,{responseType:"arraybuffer",timeout:6e4})},getCitys:function(){return r.default.httpClient.post("/Project/Group/GetCitys")},getRole:function(){return r.default.httpClient.post("/Project/Group/GetRoles")},getStaffStatus:function(){return r.default.httpClient.post("Project/Staff/GetStaffStatus")},calculate:function(t){return r.default.httpClient.post("/Project/Report/Calculate",t,{responseType:"arraybuffer",timeout:6e4})}}},W8l3:function(t,e,n){"use strict";var r=n("VsUZ"),o=n("bND5");e.a={data:function(){return{isloading:!1,cityForm:[],mainForm:{DeliveryFeeBillCsvPath:"",CityName:"",RiderEleIDColName:"",NameColName:"",RiderPickUpTimeColName:"",TeamIDColName:"",TeamNameColName:""},rolus:{CityName:[{required:!0,message:"城市不能为空",trigge:"change,blur"}],DeliveryFeeBillCsvPath:[{required:!0,message:"日账单不能为空",trigge:"change,blur"},{pattern:/\.(?:csv)$/i,message:"请输入正确的文件(csv)",trigge:"change,blur"}]}}},mounted:function(){this.getCity()},methods:{getCity:function(){var t=this;this.isloading=!0,r.a.getCitys().then(function(e){t.isloading=!1,t.cityForm=e.data.list},function(e){t.showErrorMessage(e.message)})},handledeliveryFeeBillCsvPath:function(){this.popupCKFinder("DeliveryFeeBillCsvPath")},popupCKFinder:function(t){var e=this;try{CKFinder.popup({chooseFiles:!0,width:800,height:600,onInit:function(n){n.on("files:choose",function(n){var r=n.data.files.first();e.mainForm[t]=r.getUrl()}),n.on("file:choose:resizedImage",function(n){e.mainForm[t]=n.data.resizedUrl})}})}catch(t){console.log(t.message)}},mainCreate:function(t){var e=this;this.$refs.mainForm.validate(function(t){if(t){var n=e.mainForm;e.isloading=!0,r.a.importAttendance(n).then(function(t){e.isloading=!1,console.log(e.mainForm.CityName+"考勤情况返回表.xlsx"),o(t.data,e.mainForm.CityName+"考勤情况返回表.xlsx"),e.mainForm.CityName=""},function(t){e.isloading=!1,e.showErrorMessage(t.message)})}else e.showErrorMessage("请填写必填项")})},showErrorMessage:function(t){this.$message({message:t,type:"error"})}}}},Zkk7:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}]},[n("el-header",{staticClass:"header",staticStyle:{background:"#EDF2FC"}},[n("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",[t._v("骑手考勤")])],1)],1),t._v(" "),n("el-main",[n("el-form",{ref:"mainForm",staticClass:"small-space",attrs:{model:t.mainForm,rules:t.rolus,"label-position":"right","label-width":"120px",size:"small"}},[n("el-form-item",{attrs:{label:"城市",prop:"CityName"}},[n("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.mainForm.CityName,callback:function(e){t.$set(t.mainForm,"CityName",e)},expression:"mainForm.CityName"}},t._l(t.cityForm,function(t){return n("el-option",{key:t.GroupID,attrs:{label:t.Name,value:t.GroupID}})}))],1),t._v(" "),n("el-form-item",{staticClass:"uploadPathForm",attrs:{label:"选择日账单",prop:"DeliveryFeeBillCsvPath"}},[n("el-col",[n("el-input",{ref:"DeliveryFeeBillCsvPath",staticClass:"input-with-select",attrs:{"auto-complete":"off",placeholder:"请选择日账单",disabled:!0},model:{value:t.mainForm.DeliveryFeeBillCsvPath,callback:function(e){t.$set(t.mainForm,"DeliveryFeeBillCsvPath","string"==typeof e?e.trim():e)},expression:"mainForm.DeliveryFeeBillCsvPath"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handledeliveryFeeBillCsvPath},slot:"append"})],1)],1)],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"userdButton",attrs:{type:"primary"},on:{click:function(e){t.mainCreate("mainForm")}}},[t._v("考勤")])],1)],1)],1)],1)},o=[],a={render:r,staticRenderFns:o};e.a=a},bzuE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="/manager/api"},uN2V:function(t,e){}},["AMoT"]);
//# sourceMappingURL=importattendance.js.map